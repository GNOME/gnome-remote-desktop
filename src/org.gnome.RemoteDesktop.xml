<!DOCTYPE node PUBLIC
'-//freedesktop//DTD D-BUS Object Introspection 1.0//EN'
'http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd'>
<node>

  <!--
      org.gnome.RemoteDesktop.Dispatcher:
      @short_description: Dispatcher interface

      This API is intended to be used to dispatch remote
      desktop client connections from the system to a specific
      session.
      No compatibility between versions is promised.
  -->
  <interface name="org.gnome.RemoteDesktop.Dispatcher">

    <!--
        RequestHandover:

        Looks if there is an active client waiting to be handed over to
        the session.
    -->
    <method name="RequestHandover">
      <arg name="handover" direction="out" type="o"/>
    </method>

  </interface>

  <!--
      org.gnome.RemoteDesktop.Handover:
      @short_description: Handover interface

      This API is intended to be used to process a Handover of an RDP client 
      between two grd-daemons.
      No compatibility between versions is promised.
  -->
  <interface name="org.gnome.RemoteDesktop.Handover">

    <!--
        StartHandover:

        The dst server is ready and starts the handover proccess sending its
        one time username/password and getting the certificate and key used
        by the system server.
    -->
    <method name="StartHandover">
      <arg name="username" direction="in" type="s"/>
      <arg name="password" direction="in" type="s"/>
      <arg name="certificate" direction="out" type="s"/>
      <arg name="key" direction="out" type="s"/>
    </method>

    <!--
        RedirectClient:

        Signal to make the src server send the server redirection with the
        routing token and one time username/password to the client.
    -->
    <signal name="RedirectClient">
      <arg name="routing_token" type="s"/>
      <arg name="username" type="s"/>
      <arg name="password" type="s"/>
    </signal>

    <!--
        TakeClientReady:

        Signal to make aware the dst server that the client has redirected
        successfully and is ready to be taken.
    -->
    <signal name="TakeClientReady" />

    <!--
        TakeClient:

        The dst server takes the file descriptor which has the active
        connection of the redirected client.
    -->
    <method name="TakeClient">
      <annotation name="org.gtk.GDBus.C.UnixFD" value="true"/>
      <arg name="fd" direction="out" type="h"/>
    </method>

  </interface>

</node>
